<script language="javascript" type="text/javascript" src="https://w4.chabad.org/scripts/js/os/jquery-latest.min.js?v=20170328.5" onerror="console.error('Failed to load jQuery')"></script>
<script>
console.log('jQuery loaded:', typeof jQuery !== 'undefined');
</script>
<script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" onerror="console.error('Failed to load OwlCarousel')"></script>
<script>
console.log('OwlCarousel loaded:', typeof jQuery !== 'undefined' && typeof jQuery.fn.owlCarousel !== 'undefined');
</script>
<script>
const startTime = performance.now();
let jqueryLoaded = false;
let owlCarouselLoaded = false;

function checkDependencies() {
  const currentTime = performance.now();
  const loadTime = (currentTime - startTime).toFixed(2);
  
  console.log(`Dependency check at ${loadTime}ms:`);
  console.log('- jQuery loaded:', jqueryLoaded);
  console.log('- OwlCarousel loaded:', owlCarouselLoaded);
  
  if (jqueryLoaded && owlCarouselLoaded) {
    console.log('All dependencies loaded successfully');
    return true;
  }
  return false;
}

// Check dependencies every 100ms for up to 5 seconds
let attempts = 0;
const maxAttempts = 50;
const checkInterval = setInterval(() => {
  attempts++;
  if (checkDependencies() || attempts >= maxAttempts) {
    clearInterval(checkInterval);
    if (attempts >= maxAttempts) {
      console.error('Dependencies failed to load within timeout period');
    }
  }
}, 100);
</script>

jQuery(window).on("load", function () {
  const loadTime = (performance.now() - startTime).toFixed(2);
  console.log(`Window load event fired at ${loadTime}ms`);
  console.log('jQuery version:', jQuery.fn.jquery);
  console.log('OwlCarousel available:', typeof jQuery.fn.owlCarousel !== 'undefined');
  var articleId = Co.ArticleId;
  var settings = {};
  if (typeof jQuery !== 'undefined' && typeof jQuery.fn.owlCarousel !== 'undefined') {
    console.log('Initializing FC with dependencies loaded');
    FC.init(Co, settings);
  } else {
    console.warn('Required dependencies (jQuery/OwlCarousel) not loaded');
    console.log('jQuery status:', typeof jQuery !== 'undefined');
    console.log('OwlCarousel status:', typeof jQuery !== 'undefined' ? typeof jQuery.fn.owlCarousel !== 'undefined' : 'jQuery not loaded');
  }
}); 
